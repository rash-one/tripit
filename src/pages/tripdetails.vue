<template>
  <div class="container mx-auto">
    <div class="w-full pt-20 h-screen">
      <div
        class="main w-full rounded-2xl mt-20 flex flex-col gap-4 lg:flex-row p-4 lg:p-8"
      >
        <!-- slider -->
        <div
          id="custom-carousel"
          class="relative w-full h-96 lg:h-auto lg:w-6/12"
          data-carousel="slide"
        >
          <!-- Carousel wrapper -->
          <div class="relative h-full overflow-hidden rounded-lg">
            <!-- Loop through the images dynamically -->
            <div
              v-for="(image, index) in trip.trips_images"
              :key="index"
              class="absolute inset-0 duration-700 ease-in-out"
              :class="{ hidden: currentImageIndex !== index }"
              data-carousel-item
            >
              <img
                :src="getImageUrl(image.image_name)"
                class="block w-full h-full object-cover object-center rounded-2xl"
                alt="Trip Image"
              />
            </div>
            <!-- Default image when there are no images -->
            <div
              v-if="!trip.trips_images || trip.trips_images.length === 0"
              class="absolute inset-0 duration-700 ease-in-out"
              data-carousel-item
            >
              <img
                src="/src/assets/egypt.png"
                class="block w-full h-full object-cover object-center rounded-2xl"
                alt="Default Image"
              />
            </div>
          </div>

          <!-- Slider indicators -->
          <div
            class="absolute z-30 flex space-x-3 -translate-x-1/2 bottom-5 left-1/2"
          >
            <button
              v-for="(image, index) in trip.trips_images"
              :key="index"
              type="button"
              class="w-3 h-3 rounded-full bg-white"
              :class="{ 'bg-yellow-500': currentImageIndex === index }"
              @click="setImageIndex(index)"
              aria-current="currentImageIndex === index ? 'true' : 'false'"
              :aria-label="'Slide ' + (index + 1)"
              data-carousel-slide-to="index"
            ></button>
          </div>

          <!-- Slider controls -->
          <button
            type="button"
            class="absolute top-0 left-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group"
            @click="prevImage"
          >
            <span
              class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/30 group-hover:bg-white/50"
            >
              <svg
                class="w-6 h-6 text-white"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M15 19l-7-7 7-7"
                ></path>
              </svg>
              <span class="sr-only"> {{$t('prev')}}</span>
            </span>
          </button>
          <button
            type="button"
            class="absolute top-0 right-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group"
            @click="nextImage"
          >
            <span
              class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/30 group-hover:bg-white/50"
            >
              <svg
                class="w-6 h-6 text-white"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 5l7 7-7 7"
                ></path>
              </svg>
              <span class="sr-only"> {{$t('Next')}}</span>
            </span>
          </button>
        </div>
        <div class="info flex flex-col gap-4 2xl:gap-8 w-full h-full lg:w-6/12">
          <div class="title gap-4 flex flex-col">
            <div class="tripTitle flex flex-col md:flex-row justify-between">
              <h1 class=" text-lg md:text-2xl font-bold text-[#ffb830]">
                {{ trip.title }}
              </h1>
              <p class="text-lg md:text-2xl font-semibold text-[#ffb830]">
                {{ trip.price }} EGP
              </p>
            </div>
            <p class=" text-md md:text-lg">{{ trip.description }}</p>
          </div>
          <div class="tripIns w-full h-full flex flex-col gap-4">
            <div class="location flex flex-row gap-1 items-center">
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M12 13C13.6569 13 15 11.6569 15 10C15 8.34315 13.6569 7 12 7C10.3431 7 9 8.34315 9 10C9 11.6569 10.3431 13 12 13Z"
                  stroke="#FA8B02"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M12 2C9.87827 2 7.84344 2.84285 6.34315 4.34315C4.84285 5.84344 4 7.87827 4 10C4 11.892 4.402 13.13 5.5 14.5L12 22L18.5 14.5C19.598 13.13 20 11.892 20 10C20 7.87827 19.1571 5.84344 17.6569 4.34315C16.1566 2.84285 14.1217 2 12 2V2Z"
                  stroke="#FA8B02"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              <p class="text-md md:text-lg font-semibold text-center">{{$t('location')}}:</p>
              <p class="text-md md:text-lg text-center">{{ trip.locations.gov_name }}</p>
            </div>
            <div class="duration flex flex-row gap-1 items-center">
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M11.9784 23.9971H2.93269C2.78984 24.0025 2.64681 24.0003 2.50421 23.9905C2.28884 23.9734 2.08786 23.8757 1.94149 23.7168C1.79512 23.5579 1.71417 23.3495 1.71485 23.1335C1.71607 22.9167 1.80039 22.7087 1.95044 22.5523C2.10049 22.3959 2.30483 22.303 2.52135 22.2927C2.98089 22.267 3.44151 22.267 3.90105 22.2927C4.2267 22.3118 4.29811 22.187 4.28859 21.888C4.24289 20.4084 4.32763 18.9449 4.83134 17.5309C5.53214 15.5627 6.7357 14.0411 8.67529 13.1737C9.19042 12.9442 9.48655 12.55 9.48179 11.993C9.47703 11.436 9.17042 11.056 8.65815 10.8218C6.21581 9.69918 5.00178 7.66437 4.47998 5.12871C4.28288 4.17653 4.26193 3.20721 4.30002 2.24074C4.31525 1.84368 4.24003 1.64658 3.79346 1.71324C3.5297 1.75227 3.25548 1.7199 2.98506 1.7199C2.13571 1.71609 1.71009 1.43044 1.71866 0.849608C1.72723 0.268777 2.13952 0.00216674 2.95649 0.00216674H21.0413C21.1841 0.00216674 21.3269 -0.00545071 21.4688 0.00787983C21.6855 0.0197526 21.8899 0.112717 22.0412 0.268305C22.1926 0.423893 22.2799 0.630721 22.2858 0.847703C22.2882 0.95953 22.2685 1.07073 22.2278 1.17494C22.1872 1.27914 22.1264 1.3743 22.0489 1.45497C21.9714 1.53564 21.8788 1.60023 21.7763 1.64503C21.6738 1.68984 21.5635 1.71399 21.4517 1.71609C21.0077 1.74231 20.5626 1.74231 20.1186 1.71609C19.7711 1.69229 19.6968 1.82369 19.7073 2.14648C19.753 3.60903 19.6654 5.05634 19.1712 6.457C18.4694 8.4442 17.2601 9.98007 15.2987 10.8475C14.8007 11.0684 14.5188 11.4588 14.5141 11.9901C14.5141 12.5462 14.8045 12.9366 15.3187 13.1727C17.7943 14.3153 19.0236 16.3673 19.533 18.9487C19.7234 19.8894 19.7377 20.8387 19.7044 21.79C19.6911 22.1708 19.773 22.346 20.1881 22.2918C20.4572 22.2724 20.7272 22.2702 20.9965 22.2851C21.8601 22.2851 22.2734 22.5574 22.281 23.1316C22.2886 23.7058 21.8678 23.9971 21.0203 23.9971H11.9784ZM12.007 1.71609C10.1502 1.71609 8.29347 1.72657 6.43766 1.70752C6.07679 1.70752 5.98062 1.80274 5.9949 2.15695C6.02251 2.88537 5.97871 3.61665 6.09012 4.34125C6.431 6.55984 7.35652 8.36041 9.52749 9.34116C10.6406 9.84391 11.2043 10.7989 11.2005 12.0073C11.2005 13.2556 10.5844 14.1973 9.43323 14.7105C8.14683 15.2818 7.27177 16.234 6.6938 17.4861C6.02727 18.9382 5.96729 20.4855 5.99966 22.0471C5.99966 22.287 6.13678 22.2851 6.30626 22.2851C10.0991 22.2851 13.8913 22.2851 17.6829 22.2851C17.9362 22.2851 18.0076 22.2061 18.0029 21.9595C17.9895 21.1825 18.0295 20.4036 17.9076 19.6323C17.5629 17.4337 16.645 15.6389 14.495 14.6658C13.3791 14.1601 12.8059 13.2213 12.8001 12.0158C12.7944 10.7913 13.3714 9.83915 14.5064 9.32687C15.8005 8.74414 16.7079 7.80338 17.2963 6.53508C17.9467 5.13061 18.0248 3.63474 18.0076 2.11982C18.0029 1.77322 17.8953 1.70562 17.5744 1.70847C15.7157 1.72752 13.8628 1.71609 12.007 1.71609Z"
                  fill="#FA8B02"
                />
                <path
                  d="M11.9943 21.4265C10.6308 21.4265 9.26723 21.4265 7.90466 21.4265C7.15149 21.4265 6.83822 21.0942 6.85726 20.3411C6.93439 17.7778 9.05966 15.6011 11.6458 15.4364C14.3052 15.2669 16.679 17.1503 17.0646 19.7402C17.0789 19.8354 17.0999 19.9307 17.1122 20.0259C17.2475 21.0647 16.9285 21.4323 15.8906 21.4323L11.9943 21.4265Z"
                  fill="#FA8B02"
                />
                <path
                  d="M12.054 5.14355C12.8624 5.14355 13.6727 5.14355 14.4782 5.14355C15.1752 5.14832 15.4914 5.50824 15.418 6.19762C15.3539 6.83453 15.0605 7.42643 14.5925 7.86313C14.1244 8.29982 13.5136 8.55153 12.8738 8.57141C12.2892 8.59045 11.7017 8.5914 11.1161 8.57141C10.4852 8.54977 9.88297 8.3024 9.41902 7.87427C8.95508 7.44615 8.66021 6.86572 8.58806 6.23856C8.49855 5.52443 8.81467 5.15117 9.53548 5.14355C10.3753 5.14355 11.2151 5.14355 12.054 5.14355Z"
                  fill="#FA8B02"
                />
              </svg>
              <p class="text-md md:text-lg font-semibold text-center">{{$t('Duration')}}:</p>
              <p class="text-md md:text-lg text-center">{{$t('Duration2')}}</p>
            </div>
            <div class="group flex flex-row gap-1 items-center">
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 18"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M7.92817 4.73308C8.62437 2.29238 10.0301 1.07203 12.06 1.09204C14.0246 1.11204 15.4277 2.36307 16.0705 4.73842C16.1559 4.49435 16.2119 4.32496 16.2732 4.15692C16.752 2.86588 17.679 2.09633 19.042 1.98429C20.2957 1.88293 21.3093 2.43376 21.9415 3.52207C22.6257 4.69307 22.5484 5.87474 21.7401 6.96039C21.46 7.33516 21.4827 7.43652 21.8988 7.64725C23.2966 8.35145 23.9821 9.52645 23.9968 11.0882C24.0154 13.0035 24.0141 13.0048 22.1656 13.613C21.6827 13.7841 21.1821 13.9 20.6732 13.9584C20.3677 13.9864 20.125 13.8864 20.077 13.5676C20.029 13.2489 20.2317 13.0675 20.5304 13.0181C21.2556 12.9095 21.9627 12.7031 22.6324 12.4046C22.8098 12.3233 23.0325 12.2712 23.0325 12.0112C23.0325 11.2803 23.1259 10.5361 22.7924 9.84655C22.3803 8.9943 21.7321 8.40747 20.7705 8.29277C19.7753 8.18808 18.7721 8.1854 17.7763 8.28477C17.5118 8.3165 17.2544 8.39224 17.0148 8.50883C16.2346 8.86226 16.2252 8.98097 16.8134 9.59981C17.6173 10.4165 18.0896 11.5024 18.1391 12.6473C18.1631 13.1808 18.0831 13.7223 18.1604 14.2478C18.2938 15.1187 17.8804 15.5015 17.1255 15.8189C13.5138 17.3367 9.95809 17.2713 6.41841 15.5962C5.99562 15.3961 5.81423 15.1441 5.84758 14.6733C5.88492 14.1398 5.86225 13.6063 5.84758 13.0728C5.82357 11.6057 6.32638 10.368 7.41603 9.39842C7.7788 9.07566 7.66143 8.93162 7.35468 8.71556C6.34505 8.00335 3.08679 8.01936 2.08917 8.75157C1.18891 9.41709 0.667427 10.9829 0.971514 12.0552C1.04087 12.2952 1.23826 12.3433 1.40764 12.4206C2.0365 12.7029 2.7011 12.8977 3.38287 12.9994C3.69763 13.0461 3.96704 13.1822 3.92303 13.5449C3.87368 13.9451 3.56026 13.9957 3.21749 13.9451C2.19586 13.7943 1.24493 13.4302 0.321995 12.9821C0.237409 12.9507 0.163762 12.8955 0.110012 12.823C0.0562626 12.7506 0.0247269 12.664 0.0192411 12.574C0.0312446 11.5364 -0.132802 10.4854 0.321995 9.48644C0.691358 8.6428 1.36045 7.9661 2.19987 7.58723C2.46661 7.4632 2.59998 7.39651 2.35724 7.08309C1.46365 5.95476 1.34629 4.72375 2.0905 3.48206C2.73602 2.40575 3.75364 1.86293 5.00734 1.99096C6.48909 2.14167 7.41869 3.02059 7.81881 4.45433C7.83615 4.51702 7.86949 4.5757 7.92817 4.73308ZM12.004 9.12767C11.4705 9.12767 10.937 9.109 10.4035 9.12767C9.46236 9.17284 8.57244 9.56977 7.91 10.2399C7.24755 10.91 6.86087 11.8044 6.82652 12.746C6.81185 13.1902 6.85587 13.6383 6.80785 14.0798C6.75184 14.5932 6.98124 14.828 7.4307 15.0134C10.3155 16.1897 13.215 16.2537 16.1385 15.1814C17.1935 14.7933 17.1895 14.7813 17.1882 13.6863C17.1882 13.3756 17.1882 13.0648 17.1802 12.7527C17.1465 11.8107 16.7604 10.9156 16.0981 10.2448C15.4359 9.57394 14.546 9.1762 13.6045 9.13034C13.071 9.10767 12.5375 9.12767 12.004 9.12767ZM15.0542 5.07985C15.0494 4.27053 14.7234 3.49625 14.1477 2.92736C13.5721 2.35846 12.794 2.04154 11.9847 2.04631C11.1753 2.05109 10.4011 2.37717 9.83218 2.95282C9.26328 3.52847 8.94636 4.30654 8.95113 5.11586C8.9618 6.76033 10.3862 8.17407 12.0213 8.16073C13.6565 8.14739 15.0716 6.72432 15.0542 5.07985ZM4.7766 7.25114C5.34942 7.2434 5.89579 7.00877 6.29584 6.59872C6.69589 6.18867 6.91696 5.63668 6.91055 5.06384C6.89054 3.89284 5.87692 2.89789 4.71659 2.91923C3.55625 2.94057 2.5493 3.9742 2.5693 5.12386C2.5867 5.69641 2.82734 6.23946 3.23979 6.63696C3.65224 7.03446 4.2038 7.25488 4.7766 7.25114ZM19.2541 7.25114C19.8266 7.24743 20.375 7.02036 20.7826 6.61828C21.1901 6.21621 21.4246 5.67091 21.436 5.09852C21.4216 4.5262 21.1886 3.98113 20.7847 3.57531C20.3809 3.1695 19.837 2.93377 19.2648 2.91656C18.6913 2.9272 18.1444 3.16011 17.7393 3.56617C17.3343 3.97223 17.1027 4.51971 17.0935 5.09318C17.0949 5.66566 17.323 6.21427 17.7279 6.61894C18.1329 7.02362 18.6816 7.25141 19.2541 7.25247V7.25114ZM9.46995 8.20341C8.62479 7.4675 8.08493 6.44248 7.95618 5.32925C7.80947 5.76804 7.75346 6.03345 7.63609 6.26285C7.4427 6.6483 6.96923 7.08976 7.05726 7.36984C7.15462 7.68726 7.80014 7.79529 8.10022 8.09938C8.51901 8.5275 8.90312 8.58885 9.46995 8.20341ZM14.474 8.27676C14.9529 8.33678 15.2423 8.71155 15.601 8.35145C15.9425 8.0021 16.3507 7.72498 16.8014 7.53655C17.0001 7.45519 17.1201 7.3605 16.9227 7.15911C16.468 6.69631 16.2852 6.09214 16.0345 5.33059C15.8878 6.58294 15.3476 7.45519 14.4727 8.27676H14.474Z"
                  fill="#FA8B02"
                  stroke="#FA8B02"
                  stroke-width="0.5"
                />
              </svg>

              <p class="text-md md:text-lg font-semibold text-center"> {{$t('numOgGroup')}}:</p>
              <p class="text-md md:text-lg text-center">{{$t('numOgGroup2')}}</p>
            </div>
            <div class="language flex flex-row gap-1 items-center">
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g clip-path="url(#clip0_283_796)">
                  <path
                    d="M23.9975 14.1652C23.9975 16.6505 23.9975 19.1361 23.9975 21.6219C23.9975 23.1459 23.1493 23.9967 21.6302 23.9975C17.9784 23.9975 14.3263 23.9975 10.6739 23.9975C9.27403 23.9975 8.47995 23.2917 8.3108 21.9052C8.23331 21.2728 8.14415 20.6412 8.08582 20.0062C8.05916 19.6938 7.86001 19.7496 7.6742 19.7496C5.93883 19.7496 4.2029 19.7496 2.46641 19.7496C0.843246 19.7479 0 18.9147 0 17.294V2.42225C0 0.838246 0.833246 0 2.40558 0H9.07156C10.5522 0 11.3821 0.779085 11.508 2.2606C11.5546 2.81304 11.6521 3.36048 11.7013 3.91293C11.7271 4.19706 11.8479 4.25706 12.1179 4.25622C15.2559 4.24539 18.3939 4.24872 21.5336 4.24956C23.1576 4.24956 23.9975 5.0903 23.9975 6.71013C23.9975 9.19599 23.9975 11.681 23.9975 14.1652ZM10.7589 22.5593C10.8972 22.5718 10.9505 22.581 11.0039 22.581C14.5996 22.581 18.195 22.581 21.7902 22.581C22.3602 22.581 22.5801 22.331 22.581 21.7094C22.581 16.6544 22.581 11.6016 22.581 6.55098C22.581 5.91605 22.3368 5.66608 21.7019 5.66608C18.5639 5.66608 15.4267 5.66608 12.2862 5.66024C12.0021 5.66024 11.9121 5.70357 11.9529 6.02604C12.2029 7.87835 12.4304 9.73482 12.6612 11.5896C12.9503 13.9135 13.222 16.2391 13.5319 18.5597C13.5969 19.0447 13.5011 19.4071 13.1753 19.7688C12.3737 20.6645 11.598 21.5894 10.7589 22.5593ZM1.41652 9.87314C1.41652 12.414 1.41652 14.9551 1.41652 17.4965C1.41652 18.0406 1.66649 18.3298 2.17561 18.3298C5.38361 18.3364 8.5916 18.3298 11.7996 18.3373C12.0229 18.3373 12.0854 18.2731 12.0537 18.0498C11.9638 17.404 11.8979 16.7558 11.8154 16.11C11.5446 13.9935 11.2647 11.8779 10.9997 9.76148C10.6856 7.24425 10.3839 4.72617 10.0748 2.20894C10.0031 1.62566 9.76398 1.42152 9.16571 1.42069C6.88817 1.42069 4.61063 1.42069 2.33309 1.42069C1.6215 1.42069 1.41652 1.62566 1.41652 2.33726C1.41652 4.84699 1.41652 7.35895 1.41652 9.87314ZM11.3247 19.7479C10.7097 19.7479 10.2031 19.7479 9.69732 19.7479C9.53067 19.7479 9.47151 19.8071 9.49151 19.9679C9.55734 20.4912 9.61983 21.0145 9.69482 21.6344L11.3247 19.7479Z"
                    fill="#FA8B02"
                  />
                  <path
                    d="M15.7597 10.5828C15.8564 10.5828 15.9538 10.5828 16.0513 10.5828C16.3146 10.5828 16.6279 10.6661 16.8279 10.5478C17.0279 10.4295 16.8829 10.0895 16.9179 9.84952C16.9746 9.46706 17.2995 9.16209 17.6445 9.17626C17.9895 9.19042 18.2794 9.48289 18.3278 9.84952C18.3586 10.0803 18.2236 10.3936 18.3903 10.5253C18.5977 10.6919 18.9227 10.5728 19.1968 10.5803C19.5718 10.5911 19.9468 10.5803 20.3217 10.5853C20.7892 10.5944 21.1058 10.8536 21.1466 11.2452C21.1833 11.601 20.9108 11.9235 20.465 11.9901C20.3978 11.9932 20.3336 12.0188 20.2827 12.0627C20.2317 12.1067 20.1971 12.1665 20.1842 12.2326C19.8767 13.1848 19.3965 14.0723 18.7677 14.8507C18.6119 15.0448 18.6602 15.1531 18.8319 15.2873C19.2368 15.6031 19.6318 15.9314 20.0309 16.2539C20.455 16.5963 20.5484 17.0321 20.2692 17.3671C19.9901 17.702 19.5751 17.7004 19.1627 17.3671C18.7077 17.0029 18.2561 16.6346 17.8136 16.2555C17.6687 16.1305 17.5753 16.1305 17.4304 16.2555C16.9879 16.6355 16.5363 17.0054 16.0813 17.3671C15.6647 17.7004 15.2481 17.6904 14.9748 17.3629C14.7015 17.0354 14.7898 16.593 15.2139 16.2505C15.613 15.9281 16.008 15.5998 16.413 15.284C16.5854 15.1498 16.6321 15.0406 16.4763 14.8473C15.8467 14.0698 15.3677 13.1817 15.0639 12.2284C15.0089 12.0551 14.9156 12.0085 14.739 11.9843C14.5646 11.966 14.4029 11.8846 14.2844 11.7554C14.1659 11.6261 14.0988 11.458 14.0957 11.2827C14.104 10.9127 14.419 10.6069 14.8415 10.5844C15.1464 10.5686 15.4522 10.5844 15.758 10.5844L15.7597 10.5828ZM16.4813 11.9993C16.7212 12.6529 17.051 13.2698 17.4612 13.8324C17.5878 14.0108 17.6678 13.9991 17.7887 13.8324C18.1416 13.3382 18.4402 12.8075 18.6794 12.2493C18.7744 12.0243 18.6944 11.9993 18.4944 11.9993C17.8445 12.0043 17.1937 11.9993 16.4813 11.9993Z"
                    fill="#FA8B02"
                  />
                  <path
                    d="M6.40771 4.98353C7.65758 4.98353 7.66674 5.0002 7.90755 6.2259C8.31501 8.27486 8.73413 10.3213 9.13992 12.3694C9.20325 12.6869 9.22325 13.0135 8.92078 13.2443C8.69497 13.4168 8.45083 13.4651 8.18169 13.3343C7.91255 13.2035 7.81173 12.9735 7.75923 12.7052C7.64258 12.1078 7.52093 11.5112 7.41427 10.9121C7.37177 10.6696 7.27428 10.5621 7.00598 10.5788C6.5764 10.6042 6.14569 10.6042 5.71611 10.5788C5.45864 10.5638 5.37615 10.6804 5.33532 10.8962C5.2245 11.4795 5.10368 12.0628 4.99369 12.6461C4.89537 13.1693 4.57707 13.4676 4.17877 13.4052C3.72549 13.336 3.48968 12.9344 3.5955 12.3869C3.9363 10.6913 4.28376 8.99728 4.62706 7.30412C4.73372 6.77501 4.82537 6.2434 4.93953 5.71596C5.06618 5.13268 5.25866 4.98936 5.8561 4.9852C6.04691 4.9827 6.22773 4.98353 6.40771 4.98353ZM6.35271 9.1656C6.42187 9.1656 6.49103 9.1656 6.56019 9.1656C7.07347 9.1656 7.06014 9.1656 6.95182 8.64232C6.81517 7.99488 6.70184 7.34162 6.57102 6.69335C6.54603 6.57337 6.55436 6.38089 6.35771 6.39755C6.2019 6.41005 6.20273 6.5767 6.1794 6.69002C6.05774 7.29829 5.94526 7.90823 5.83193 8.52316C5.71195 9.1656 5.71361 9.1656 6.35271 9.1656Z"
                    fill="#FA8B02"
                  />
                </g>
                <defs>
                  <clipPath id="clip0_283_796">
                    <rect width="24" height="24" fill="white" />
                  </clipPath>
                </defs>
              </svg>

              <p class="text-md md:text-lg font-semibold text-center">{{$t('language')}}:</p>
              <p class="text-md md:text-lg text-center">{{$t('language2')}}</p>
            </div>
            <div class="provider flex flex-row gap-1 items-center">
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g clip-path="url(#clip0_283_787)">
                  <path
                    d="M7.18362 12.8597C7.46652 12.2085 7.40701 11.909 6.91116 11.454C6.29463 10.9073 5.85156 10.1923 5.63657 9.39698C5.57306 9.09612 5.39675 8.83099 5.14385 8.656C4.22105 7.99852 4.0154 6.85993 4.60833 5.88414C4.70333 5.72656 4.76492 5.59611 4.71272 5.40512C4.22731 3.67688 5.2044 1.66687 7.29323 0.842408C8.49934 0.374994 9.79813 0.196291 11.0857 0.320597C11.855 0.387389 12.4918 0.691083 12.7935 1.48424C12.9346 1.82299 13.1819 2.10681 13.4981 2.29304C14.7445 3.10811 14.9742 3.79064 14.5243 5.21518C14.4731 5.37694 14.4136 5.50531 14.5483 5.69107C15.279 6.69921 15.065 8.01313 14.043 8.7468C13.8733 8.86393 13.7517 9.03853 13.7007 9.23835C13.4435 10.167 12.9129 10.9968 12.1776 11.6199C11.8644 11.8902 11.8415 12.8232 12.1202 13.1154C12.2611 13.2626 12.3561 13.1331 12.4146 13.0528C12.996 12.2586 13.803 12.365 14.5942 12.531C16.7864 13.0048 18.3418 14.2446 19.0109 16.4289C19.6853 18.632 19.7417 20.9165 19.7594 23.1957C19.7594 23.6654 19.4744 23.7176 19.1018 23.7176C15.6054 23.712 12.1087 23.712 8.61167 23.7176C5.98523 23.7176 3.35844 23.7176 0.731311 23.7176C0.0444291 23.7176 -0.00672176 23.6675 0.000585497 22.9661C0.0183317 21.0135 0.122721 19.0703 0.541323 17.1573C1.14783 14.3813 3.25545 12.5654 5.96957 12.436C6.49987 12.411 6.49987 12.411 7.18362 12.8597ZM10.0481 22.9515C11.736 22.9515 13.423 22.938 15.1099 22.9609C15.5275 22.9609 15.6433 22.8451 15.6319 22.4391C15.6047 21.3266 15.6225 20.2131 15.6235 19.0995C15.6235 18.8908 15.6078 18.6748 15.8323 18.5506C16.1267 18.3888 16.3824 18.6017 16.3855 19.0453C16.3949 20.2099 16.3981 21.3757 16.3855 22.5403C16.3855 22.8534 16.4711 22.9724 16.7979 22.9578C17.4054 22.9348 18.0151 22.9453 18.6237 22.9578C18.8523 22.9578 18.9859 22.9067 18.9775 22.6447C18.9086 20.5418 18.8784 18.4316 18.179 16.4122C17.6445 14.8666 16.5087 13.9388 14.9888 13.4274C14.6892 13.3231 14.5222 13.3836 14.3625 13.6685C13.7278 14.7675 13.0701 15.8539 12.4094 16.9371C12.2635 17.1696 12.1881 17.4393 12.1922 17.7136C12.2027 19.0181 12.1995 20.3227 12.1922 21.6261C12.1922 22.2408 12.1066 22.3264 11.5043 22.3285C10.3741 22.3285 9.24322 22.3285 8.11164 22.3285C7.44668 22.3285 7.38614 22.2711 7.38092 21.623C7.38092 20.3707 7.37152 19.1183 7.38092 17.866C7.39312 17.5197 7.30151 17.1777 7.11786 16.8839C6.47795 15.8486 5.84117 14.8102 5.24511 13.7531C5.03633 13.3847 4.82755 13.3742 4.49037 13.5068C2.84833 14.1653 1.77416 15.3237 1.36182 17.0676C0.931739 18.872 0.834657 20.7098 0.764716 22.5539C0.752189 22.891 0.888939 22.9641 1.19167 22.9557C1.86916 22.939 2.54873 22.9348 3.22622 22.9557C3.56235 22.9672 3.67718 22.868 3.67092 22.5195C3.65108 21.3892 3.66465 20.259 3.66257 19.1277C3.66257 18.8344 3.68136 18.5172 4.04985 18.5068C4.41834 18.4963 4.44653 18.8198 4.44757 19.112C4.44757 20.2079 4.46636 21.3037 4.43922 22.3984C4.42878 22.8221 4.54361 22.9661 4.98622 22.9599C6.67316 22.9317 8.36113 22.9515 10.0481 22.9515ZM9.74116 11.765C9.7944 11.765 9.91654 11.7576 10.0366 11.7378C11.7371 11.4644 12.5806 10.3133 13.0305 8.7802C13.1192 8.4765 13.2393 8.27926 13.5399 8.12376C14.3562 7.70005 14.4293 6.55832 13.6954 6.05426C13.5253 5.93737 13.4512 5.76622 13.3666 5.59715C13.0608 4.99151 12.6699 4.43273 12.2058 3.93779C12.091 3.81569 11.9605 3.59235 11.7381 3.80629C11.2579 4.27175 10.6598 4.30723 10.0387 4.29888C9.01357 4.2874 7.98533 4.27592 6.97275 4.4596C6.31823 4.57649 5.79524 4.8854 5.70233 5.63681C5.66757 5.80738 5.58034 5.96282 5.45284 6.08139C4.80145 6.79523 4.95908 7.7157 5.82238 8.15611C6.13033 8.31265 6.22741 8.52555 6.29109 8.83655C6.63975 10.5481 8.05527 11.765 9.74116 11.765ZM5.39125 4.43038C6.22637 3.66958 7.13351 3.59548 8.03961 3.56209C8.78495 3.53078 9.53238 3.53704 10.2788 3.53287C10.6556 3.53287 10.9991 3.45877 11.2757 3.17282C11.7392 2.69379 11.877 2.68544 12.401 3.07889C12.8812 3.43998 13.2225 3.92109 13.5649 4.40325C13.6464 4.517 13.6693 4.70172 13.8593 4.71633C14.0942 3.96388 14.0086 3.59548 13.3457 3.14359C12.7549 2.7418 12.259 2.29096 11.9887 1.61573C11.8738 1.32769 11.6076 1.19828 11.3321 1.15863C9.59502 0.931116 7.93314 1.12001 6.49569 2.22729C5.84535 2.72928 5.45598 3.41598 5.39125 4.43038ZM13.6746 13.2918C13.353 13.1603 13.2319 13.3763 13.0879 13.5005C12.2402 14.2477 11.3971 14.9998 10.5585 15.7568C9.785 16.4613 9.79127 16.4613 9.01565 15.7307C8.22125 14.9772 7.42058 14.23 6.62618 13.4775C6.42784 13.2897 6.23368 13.1269 5.92468 13.2928C5.9413 13.3585 5.96402 13.4224 5.99254 13.4838C6.60635 14.5128 7.22955 15.5376 7.83501 16.5719C7.9655 16.7942 8.13878 16.8192 8.35696 16.8171C9.05219 16.8171 9.75682 16.7451 10.4447 16.8328C11.3185 16.9455 11.8018 16.6021 12.1849 15.8445C12.6202 14.9668 13.1683 14.1475 13.6746 13.2918ZM8.14192 19.5817C8.14192 20.1202 8.1534 20.6577 8.14192 21.1951C8.13461 21.4633 8.22647 21.5666 8.49788 21.5635C9.333 21.552 10.1681 21.5489 10.997 21.5635C11.3227 21.5698 11.4145 21.4393 11.4145 21.1325C11.4013 20.0889 11.4013 19.0477 11.4145 18.0089C11.4145 17.6896 11.3101 17.5852 10.997 17.5915C10.1817 17.6071 9.36536 17.6103 8.55008 17.5915C8.21812 17.5842 8.13774 17.7178 8.14922 18.0215C8.16279 18.5401 8.14818 19.062 8.14818 19.5817H8.14192ZM11.4918 13.6623C11.3274 13.3353 11.2214 12.9821 11.1786 12.6186C11.1535 12.2993 11.0325 12.3055 10.7819 12.3807C10.1643 12.5699 9.50863 12.5987 8.87682 12.4642C8.17636 12.3275 8.17532 12.3254 7.9989 13.0256C7.93522 13.2792 7.75881 13.5203 8.0584 13.7771C8.57096 14.2164 9.05532 14.6923 9.54073 15.163C9.70671 15.3237 9.83407 15.3623 10.0209 15.188C10.4531 14.7873 10.902 14.4043 11.3415 14.0108C11.4396 13.9336 11.5544 13.8626 11.498 13.6623H11.4918Z"
                    fill="#FA8B02"
                    stroke="#FA8B02"
                    stroke-width="0.5"
                  />
                  <path
                    d="M17.1747 6.67746V1.46562C17.1747 1.41344 17.1747 1.36125 17.1747 1.30907C17.1852 1.03982 17.2624 0.810222 17.585 0.821702C17.872 0.832138 17.9879 1.05025 17.9451 1.29342C17.8491 1.85176 18.1643 2.12832 18.5631 2.42992C20.2563 3.70523 21.9276 5.00976 23.6041 6.30802C23.8045 6.46248 24.0863 6.60128 23.9746 6.92376C23.8629 7.24624 23.5696 7.19719 23.3086 7.19719H19.1915C17.9576 7.19719 17.9576 7.19719 17.9576 8.45788C17.9576 9.60447 17.9576 10.7525 17.9576 11.9018C17.9576 12.1847 17.9764 12.5176 17.5902 12.528C17.1622 12.5437 17.1726 12.1909 17.1726 11.8904C17.1726 10.1531 17.1733 8.41544 17.1747 6.67746ZM22.3149 6.29341C20.9505 5.24353 19.6007 4.19782 18.2374 3.15628C17.9712 2.94756 17.9618 3.15628 17.9618 3.34831C17.9618 4.21765 17.9775 5.08803 17.9535 5.95736C17.9441 6.33516 18.0913 6.42804 18.441 6.42282C19.5892 6.40717 20.7375 6.42282 21.8858 6.41447C22.0142 6.41343 22.1614 6.46248 22.3149 6.29341Z"
                    fill="#FA8B02"
                    stroke="#FA8B02"
                    stroke-width="0.5"
                  />
                  <path
                    d="M9.80111 18.0476C10.0276 18.0476 10.2542 18.0372 10.4796 18.0476C10.5281 18.0456 10.5765 18.0535 10.6218 18.0707C10.6671 18.0879 10.7085 18.1142 10.7434 18.1478C10.7784 18.1815 10.8061 18.2218 10.825 18.2665C10.8439 18.3111 10.8535 18.3592 10.8534 18.4077C10.8603 18.4559 10.8567 18.505 10.8429 18.5517C10.8291 18.5984 10.8054 18.6416 10.7734 18.6784C10.7414 18.7151 10.7019 18.7445 10.6575 18.7646C10.6131 18.7847 10.5649 18.795 10.5162 18.7948C10.0308 18.8126 9.54327 18.8105 9.05473 18.7948C9.00599 18.796 8.95757 18.7868 8.9127 18.7677C8.86783 18.7487 8.82754 18.7203 8.79453 18.6844C8.76152 18.6485 8.73656 18.606 8.7213 18.5598C8.70605 18.5135 8.70085 18.4645 8.70607 18.416C8.70389 18.3675 8.71175 18.319 8.72917 18.2737C8.74659 18.2284 8.77318 18.1871 8.80728 18.1525C8.84138 18.118 8.88226 18.0908 8.92736 18.0727C8.97245 18.0547 9.02079 18.0461 9.06934 18.0476C9.31466 18.0382 9.55788 18.0487 9.80111 18.0476Z"
                    fill="#FA8B02"
                    stroke="#FA8B02"
                    stroke-width="0.2"
                  />
                  <path
                    d="M9.79994 19.946C9.55672 19.946 9.31349 19.9554 9.06922 19.946C9.02075 19.9475 8.9725 19.939 8.92751 19.9209C8.88252 19.9028 8.84177 19.8756 8.80783 19.841C8.77389 19.8064 8.7475 19.7651 8.73032 19.7198C8.71314 19.6744 8.70555 19.626 8.70803 19.5776C8.7028 19.5292 8.70799 19.4802 8.72325 19.434C8.73852 19.3878 8.7635 19.3453 8.79653 19.3095C8.82955 19.2738 8.86986 19.2455 8.91473 19.2265C8.9596 19.2076 9.00801 19.1985 9.05669 19.1998C9.52575 19.1873 9.9948 19.1873 10.4639 19.1998C10.7071 19.205 10.8595 19.3438 10.8511 19.5954C10.8428 19.8197 10.6946 19.9397 10.4764 19.9512C10.2582 19.9627 10.0265 19.9471 9.79994 19.946Z"
                    fill="#FA8B02"
                    stroke="#FA8B02"
                    stroke-width="0.2"
                  />
                  <path
                    d="M9.76126 21.0884C9.53682 21.0884 9.31134 21.0884 9.08586 21.0884C9.03769 21.0917 8.98936 21.085 8.94391 21.0687C8.89845 21.0525 8.85686 21.0269 8.82175 20.9938C8.78665 20.9607 8.75878 20.9206 8.73992 20.8762C8.72106 20.8318 8.7116 20.7839 8.71215 20.7356C8.70451 20.6877 8.70747 20.6387 8.72083 20.5921C8.73419 20.5454 8.75762 20.5022 8.78947 20.4656C8.82132 20.429 8.86081 20.3998 8.90517 20.3801C8.94952 20.3604 8.99766 20.3507 9.04619 20.3516C9.53056 20.338 10.017 20.3391 10.5014 20.3516C10.5498 20.3494 10.5982 20.3576 10.6432 20.3758C10.6881 20.394 10.7287 20.4217 10.762 20.457C10.7953 20.4922 10.8205 20.5343 10.8361 20.5802C10.8517 20.6261 10.8571 20.6749 10.8521 20.7231C10.8543 20.7713 10.8465 20.8194 10.8291 20.8644C10.8117 20.9094 10.7851 20.9503 10.751 20.9845C10.717 21.0186 10.6761 21.0453 10.6312 21.0629C10.5862 21.0804 10.5381 21.0884 10.4899 21.0863C10.2477 21.0988 10.0045 21.0863 9.75917 21.0863L9.76126 21.0884Z"
                    fill="#FA8B02"
                    stroke="#FA8B02"
                    stroke-width="0.2"
                  />
                </g>
                <defs>
                  <clipPath id="clip0_283_787">
                    <rect width="24" height="24" fill="white" />
                  </clipPath>
                </defs>
              </svg>

              <p class="text-md md:text-lg font-semibold text-center">{{$t('Provider')}}:</p>
              <p class="text-md md:text-lg text-center">{{ trip.users.username }}</p>
            </div>
            <div class="dates flex flex-row gap-1 items-center">
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g
                  id="SVGRepo_tracerCarrier"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></g>
                <g id="SVGRepo_iconCarrier">
                  <path
                    d="M3 9H21M7 3V5M17 3V5M6 12H8M11 12H13M16 12H18M6 15H8M11 15H13M16 15H18M6 18H8M11 18H13M16 18H18M6.2 21H17.8C18.9201 21 19.4802 21 19.908 20.782C20.2843 20.5903 20.5903 20.2843 20.782 19.908C21 19.4802 21 18.9201 21 17.8V8.2C21 7.07989 21 6.51984 20.782 6.09202C20.5903 5.71569 20.2843 5.40973 19.908 5.21799C19.4802 5 18.9201 5 17.8 5H6.2C5.0799 5 4.51984 5 4.09202 5.21799C3.71569 5.40973 3.40973 5.71569 3.21799 6.09202C3 6.51984 3 7.07989 3 8.2V17.8C3 18.9201 3 19.4802 3.21799 19.908C3.40973 20.2843 3.71569 20.5903 4.09202 20.782C4.51984 21 5.07989 21 6.2 21Z"
                    stroke="#FA8B02"
                    stroke-width="2"
                    stroke-linecap="round"
                  ></path>
                </g>
              </svg>

              <p class="text-md md:text-lg font-semibold text-center"> {{$t('Trip Dates')}}:</p>
              <p class="text-sm md:text-lg text-center">
                 {{$t('f')}}
                {{
                  formatStartAndEndDate(trip.start_date, trip.end_date).start
                }}
                {{$t('t')}}
                {{ formatStartAndEndDate(trip.start_date, trip.end_date).end }}
              </p>
            </div>
          </div>
          <div class="tripbttns flex w-full">
            <router-link
              :to="`/booking/${trip.id}`"
              class="bg-[#ffb830] text-white p-2 rounded-lg hover:bg-[#feaf55] w-full text-center"
            >
               {{$t('bookNow')}}
            </router-link>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import axios from "axios";
import { supabase } from "../supabase";
export default {
  name: "tripdetailsPage",
  data() {
    return {
      trip: null,
      currentImageIndex: 0,
    };
  },
  methods: {
    getDate(startDate, endDate) {
      const start = new Date(startDate);
      const end = new Date(endDate);
      const daysArray = [];
      for (let date = start; date <= end; date.setDate(date.getDate() + 1)) {
        daysArray.push(new Date(date).getDate());
      }
      return daysArray.join("/");
    },
    getMonth(date) {
      const tripDate = new Date(date);
      return tripDate.toLocaleDateString("en-US", { month: "long" });
    },
    formatDate(date) {
      const d = new Date(date);
      const day = ("0" + d.getDate()).slice(-2);
      const month = ("0" + (d.getMonth() + 1)).slice(-2);
      const year = d.getFullYear();
      return `${day}-${month}-${year}`;
    },

    formatStartAndEndDate(startDate, endDate) {
      const formattedStartDate = this.formatDate(startDate);
      const formattedEndDate = this.formatDate(endDate);
      return {
        start: formattedStartDate,
        end: formattedEndDate,
      };
    },
    getImageUrl(imageName) {
      const { data, error } = supabase.storage
        .from("trip_images")
        .getPublicUrl(`uploads/${imageName}`);

      if (error) {
        console.error("Error fetching public URL:", error);
        return null;
      }

      return data.publicUrl;
    },
    gettripid() {
      const tripId = this.$route.params.id;
      axios
        .get(
          `https://dqorskomhqezaztrdhzc.supabase.co/rest/v1/trips?id=eq.${tripId}&select=id,created_at,creator_id,location_id,title,start_date,price,end_date,description,users!inner(*),locations!inner(*),trips_images!fk_trips(id,created_at,image_name)`,
          {
            headers: {
              apikey:
                "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRxb3Jza29taHFlemF6dHJkaHpjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjQ4NjA0ODUsImV4cCI6MjA0MDQzNjQ4NX0.sT1ehQrr-wQuwq0OVRgDtPh2gnvRGfKIMiDXlZIuvMI",
              Authorization:
                "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRxb3Jza29taHFlemF6dHJkaHpjIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcyNDg2MDQ4NSwiZXhwIjoyMDQwNDM2NDg1fQ.2VhaDTcy4Cuyrek0tdur92cXYr1zeIHMm0yMti4Kkn8",
            },
          }
        )
        .then((response) => {
          this.trip = response.data[0];
          this.currentImageIndex = 0;
          console.log(this.trip);
        })
        .catch((error) => {
          console.error("Error fetching trips:", error);
        });
    },
    prevImage() {
      if (this.trip && this.trip.trips_images.length) {
        this.currentImageIndex =
          (this.currentImageIndex - 1 + this.trip.trips_images.length) %
          this.trip.trips_images.length;
      }
    },
    nextImage() {
      if (this.trip && this.trip.trips_images.length) {
        this.currentImageIndex =
          (this.currentImageIndex + 1) % this.trip.trips_images.length;
      }
    },
  },
  watch: {
    "$route.params.id": function (newId) {
      this.gettripid();
    },
  },
  created() {
    this.gettripid();
  },
};
</script>

<style scoped></style>
